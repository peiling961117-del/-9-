<html lang="zh-Hant"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥æœ¬ä¹‹æ—…è¡Œç¨‹ (æŒ‰éˆ•ç½®é ‚ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@500;700&family=Roboto+Mono:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', Inter, sans-serif;
            background-color: #f2f4f6;
            color: #333333;
            font-size: 1rem; 
            -webkit-tap-highlight-color: transparent;
        }

        .font-serif-jp { font-family: 'Noto Serif TC', serif; }
        .font-mono { font-family: 'Roboto Mono', monospace; }

        @media (min-width: 768px) { body { font-size: 1.125rem; } }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .itinerary-item { transition: all 0.2s ease-in-out; }
        
        /* ç·¨è¼¯æ¨¡å¼ä¸‹çš„æ¨£å¼ */
        .editing .timeline-card {
            cursor: pointer;
            border: 2px dashed #3b82f6; /* è—è‰²è™›ç·šæ¡† */
            position: relative;
        }
        .editing .timeline-card:hover {
            background-color: #eff6ff; /* æ·ºè—è‰²èƒŒæ™¯ */
            transform: translateY(-2px);
        }
        .editing .timeline-card::after {
            content: "âœ";
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1.2rem;
            color: #3b82f6;
        }

        /* ç€è¦½æ¨¡å¼ä¸‹ï¼Œæœ‰ä»‹ç´¹å…§å®¹çš„å¡ç‰‡æ¨£å¼ */
        .has-detail-cursor {
            cursor: pointer;
        }
        .has-detail-cursor:active {
            transform: scale(0.98);
        }

        /* ç§»é™¤åŸæœ¬çš„æµ®å‹•æŒ‰éˆ•æ¨£å¼ï¼Œæ”¹ç”¨ Tailwind Utility */

        .time-column { width: 60px; text-align: right; padding-right: 0.75rem; position: relative; z-index: 1; flex-shrink: 0; }
        @media (min-width: 768px) { .time-column { width: 80px; padding-right: 1.5rem; } }

        .timeline-dot { position: absolute; right: -5px; top: 1.5rem; transform: translateY(-50%); width: 10px; height: 10px; }
        @media (min-width: 768px) { .timeline-dot { right: -3px; top: 1.6rem; } }

        .timeline-line { position: absolute; left: 60px; top: 0; bottom: 0; width: 1px; background-color: #e0e0e0; z-index: 0; }
        @media (min-width: 768px) { .timeline-line { left: 80px; } }

        #date-nav { top: 85px; }
        @media (min-width: 768px) { #date-nav { top: 96px; } }
        
        .bg-washi {
            background-color: #fafaf6;
            background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 3h1v1H1V3zm2-2h1v1H3V1z' fill='%23dcdcdc' fill-opacity='0.15' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
    </style>
</head>
<body class="min-h-screen">

    <div id="app" class="max-w-xl mx-auto bg-white min-h-screen shadow-lg pb-10 relative">

        <header class="sticky top-0 z-20 bg-white border-b border-gray-200 shadow-sm h-[85px] md:h-[96px] flex items-center justify-center relative px-2">
            <div class="flex flex-col items-center">
                <h1 class="text-xl md:text-3xl font-serif-jp font-bold text-gray-800 text-center tracking-wide">æ—¥æœ¬è¡Œç¨‹ç¸½è¦½</h1>
                <p class="text-xs md:text-base text-gray-500 text-center mt-1 font-serif-jp">ç€¨æˆ¶å…§æµ· (å…±9æ—¥)</p>
            </div>

            <div class="absolute right-3 md:right-5 top-1/2 -translate-y-1/2 flex gap-2">
                <button id="edit-btn" onclick="toggleEditMode()" class="w-10 h-10 rounded-full bg-white text-gray-700 border border-gray-200 shadow-sm flex items-center justify-center text-lg hover:bg-gray-50 active:scale-95 transition-all" title="é€²å…¥ç·¨è¼¯æ¨¡å¼">
                    âœï¸
                </button>
                <button id="save-btn" onclick="downloadHTML()" class="w-10 h-10 rounded-full bg-green-600 text-white shadow-sm flex items-center justify-center text-lg hover:bg-green-700 active:scale-95 transition-all" title="ä¸‹è¼‰ä¸¦å„²å­˜æª”æ¡ˆ">
                    ğŸ’¾
                </button>
            </div>
        </header>
        
        <nav id="date-nav" class="no-scrollbar sticky z-10 bg-white/95 backdrop-blur-sm border-b border-gray-200 overflow-x-auto flex flex-row p-2 space-x-2"></nav>

        <main id="itinerary-content" class="p-3 md:p-4"></main>

        <div id="footer-message" class="p-4 text-center text-sm md:text-base text-gray-400 font-serif-jp">ğŸ’¡ é»æ“Šæœ‰ ğŸ“– åœ–ç¤ºçš„å¡ç‰‡å¯æŸ¥çœ‹ä»‹ç´¹</div>

    </div>

    <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden max-h-[90vh] flex flex-col">
            <div class="bg-gray-100 px-4 py-3 border-b border-gray-200 flex justify-between items-center flex-shrink-0">
                <h3 class="text-lg font-bold text-gray-800 font-serif-jp">ç·¨è¼¯è¡Œç¨‹</h3>
                <button onclick="closeModal('edit-modal')" class="text-gray-500 hover:text-gray-700 font-bold text-xl">Ã—</button>
            </div>
            <div class="p-4 space-y-4 overflow-y-auto">
                <input type="hidden" id="edit-day-index">
                <input type="hidden" id="edit-event-index">

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">æ™‚é–“</label>
                    <input type="text" id="edit-time" class="w-full border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="ä¾‹å¦‚: 10:00-12:00">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">åœ°é» / é …ç›®</label>
                    <input type="text" id="edit-location" class="w-full border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">é¡å‹ (æ±ºå®šé¡è‰²)</label>
                    <select id="edit-type" class="w-full border border-gray-300 rounded p-2 bg-white">
                        <option value="sightseeing">æ™¯é» (ç¶ )</option>
                        <option value="transport">äº¤é€š (è—)</option>
                        <option value="dining">é¤å»³ (ç´…)</option>
                        <option value="stay">ä½å®¿ (æ©˜)</option>
                        <option value="activity">æ´»å‹•/è³¼ç‰© (é»ƒ)</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">å‚™è¨» (é¡¯ç¤ºåœ¨å¡ç‰‡ä¸Š)</label>
                    <textarea id="edit-note" rows="2" class="w-full border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
                </div>

                <div class="border-t border-gray-200 pt-3">
                    <label class="block text-sm font-bold text-indigo-700 mb-1">ğŸ“– æ™¯é»/é¤å»³è©³ç´°ä»‹ç´¹ (é»æ“Šå¡ç‰‡å¾Œé¡¯ç¤º)</label>
                    <p class="text-xs text-gray-500 mb-1">å¡«å¯«æ­¤æ¬„ä½å¾Œï¼Œè©²å¡ç‰‡å°‡è®Šç‚ºå¯é»æ“ŠæŸ¥çœ‹è©³æƒ…ã€‚</p>
                    <textarea id="edit-description" rows="4" class="w-full border border-indigo-200 bg-indigo-50 rounded p-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="ä¾‹å¦‚ï¼šé€™å®¶é¤å»³çš„æ‹›ç‰Œèœæ˜¯... é€™è£¡å¿…æ‹çš„è§’åº¦æ˜¯..."></textarea>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 flex justify-end space-x-2 flex-shrink-0">
                <button onclick="closeModal('edit-modal')" class="px-4 py-2 bg-white border border-gray-300 rounded text-gray-700 hover:bg-gray-50">å–æ¶ˆ</button>
                <button onclick="saveEventChanges()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">ç¢ºèªä¿®æ”¹</button>
            </div>
        </div>
    </div>

    <div id="detail-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 hidden backdrop-blur-sm">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden flex flex-col max-h-[80vh]">
            <div id="detail-header" class="px-5 py-4 border-b border-gray-100 flex justify-between items-start bg-teal-50">
                <div>
                    <span id="detail-type-badge" class="text-xs font-bold px-2 py-0.5 rounded text-white bg-teal-500 mb-1 inline-block">æ™¯é»</span>
                    <h3 id="detail-title" class="text-xl font-bold text-gray-800 font-serif-jp leading-tight">æ™¯é»åç¨±</h3>
                </div>
                <button onclick="closeModal('detail-modal')" class="text-gray-400 hover:text-gray-600 p-1 bg-white rounded-full h-8 w-8 flex items-center justify-center shadow-sm">âœ•</button>
            </div>
            
            <div class="p-6 overflow-y-auto bg-white">
                <div id="detail-content" class="text-gray-700 leading-relaxed whitespace-pre-wrap text-base">
                    </div>
            </div>
            
            <div class="bg-gray-50 px-5 py-3 border-t border-gray-100 text-right">
                <button onclick="closeModal('detail-modal')" class="px-5 py-2 bg-gray-800 text-white rounded shadow hover:bg-gray-700 text-sm">é—œé–‰</button>
            </div>
        </div>
    </div>

    <script>
        // --- ç‹€æ…‹è®Šæ•¸ ---
        let isEditMode = false;

        // --- æ•¸æ“šçµæ§‹ (Data) ---
        let itineraryData = [
    {
        "date": "11/29(å…­)",
        "theme": "å²¡å±±/é«˜æ¾",
        "city": "å²¡å±±ãƒ»é«˜æ¾",
        "events": [
            {
                "time": "11:10-14:35",
                "location": "æ­é£›æ©Ÿ",
                "note": "æ³¨æ„åœ‹éš›ç·šéœ€æå‰2.5å°æ™‚åˆ°å ´",
                "type": "transport"
            },
            {
                "time": "16:00-16:30",
                "location": "å²¡å±±ç«™ Okayama",
                "note": "æ­ä¹˜æ©Ÿå ´å·´å£«åˆ°å²¡å±±ç«™(å¯åˆ·ICå¡)ï¼Œä¸¦åœ¨å²¡å±±ç«™é–‹é€š JR PASS",
                "type": "transport"
            },
            {
                "time": "16:40-17:35",
                "location": "é«˜æ¾ç«™ Takamatsu",
                "note": "å¾€é«˜æ¾ç­æ¬¡ï¼Œè»Šç¨‹ç´„1å°æ™‚ã€‚\nå»ºè­°ç­æ¬¡ï¼š15:42, 16:13, 16:42, 17:13, 17:42, 18:13",
                "type": "transport"
            },
            {
                "time": "Check-in",
                "location": "é«˜æ¾ç«™å‰è¶…ç´šæ—…é¤¨",
                "note": "è»Šç«™æ­¥è¡Œå¤§ç´„2åˆ°3åˆ†é˜",
                "type": "stay"
            },
            {
                "time": "æ™šé¤",
                "location": "ãŠé£Ÿäº‹å‡¦ ã¾ã¤ãŠã‹",
                "note": "è·é›¢é«˜æ¾ç«™ 600å…¬å°º (ç´„1000æ—¥åœ“)",
                "type": "dining",
                "description": "é€™æ˜¯ä¸€é–“ç•¶åœ°è©•åƒ¹ä¸éŒ¯çš„å®¶åº­å¼é£Ÿå ‚ï¼Œæä¾›å¤šç¨®å®šé£Ÿé¸æ“‡ã€‚æ¨è–¦ä»–å€‘çš„ç‚¸é›å®šé£Ÿå’Œçƒ¤é­šå®šé£Ÿï¼Œä»½é‡åè¶³ä¸”åƒ¹æ ¼å¯¦æƒ ã€‚"
            },
            {
                "time": "æ™šä¸Š",
                "location": "é«˜æ¾ä¸¸é¾œç”ºå•†åº—è¡—ã€é«˜æ¾æ¸¯å¤œæ™¯",
                "note": "å››åœ‹æœ€é•·çš„å•†åº—è¡—",
                "type": "sightseeing",
                "description": "ä¸¸é¾œç”ºå•†åº—è¡—æ“æœ‰å·¨å¤§çš„åœ“é ‚æ‹±å»Šï¼Œéå¸¸æœ‰ç‰¹è‰²ï¼Œå³ä¾¿ä¸‹é›¨ä¹Ÿèƒ½å®‰å¿ƒé€›è¡—ã€‚èµ°åˆ°ç›¡é ­å¯ä»¥å‰å¾€é«˜æ¾æ¸¯ï¼Œæ¬£è³ç€¨æˆ¶å…§æµ·çš„å¤œæ™¯å’Œã€ŒLiminal Air -core-ã€å…©æ ¹å½©è‰²æŸ±å­åœ°æ¨™ã€‚"
            }
        ]
    },
    {
        "date": "11/30(æ—¥)",
        "theme": "å°è±†å³¶",
        "city": "å°è±†å³¶",
        "events": [
            {
                "time": "07:20-07:30",
                "location": "é£¯åº—è‡³é«˜æ¾æ¸¯",
                "note": "å¾é£¯åº—æ­¥è¡Œç´„5-7åˆ†é˜(èµ°æ…¢~10åˆ†é˜å…§)è·é›¢ç´„650å…¬å°ºã€‚\nèˆ¹ç¥¨é€šå¸¸åœ¨å‡ºèˆªå‰ç´„30åˆ†é˜é–‹å§‹è²©å”®ï¼Œå»ºè­°è‡³å°‘åœ¨7:30åˆ°é”ç¢¼é ­ã€‚",
                "type": "transport"
            },
            {
                "time": "08:02-09:02",
                "location": "é«˜æ¾æ¸¯-åœŸåº„æ¸¯",
                "note": "è³¼è²·å°è±†å³¶å³¶å…§1æ—¥å·´å£«ä¹˜è»Šåˆ¸",
                "type": "transport"
            },
            {
                "time": "09:40-10:12",
                "location": "åœŸåº„æ¸¯-è‰å£æ¸¯",
                "note": "æ­ä¹˜å·´å£«ï¼ˆå‚æ‰‹ç·šï¼‰",
                "type": "transport"
            },
            {
                "time": "10:18-10:30",
                "location": "è‰å£æ¸¯-ç´…é›²äº­",
                "note": "è½‰ä¹˜å¯’æºªæ€¥è¡Œç·šï¼ˆéŠœæ¥ç­æ¬¡ï¼‰",
                "type": "transport"
            },
            {
                "time": "10:42-10:47",
                "location": "å¯’éœæºªçºœè»Š",
                "note": "ç´…é›²äº­ç«™æ­ä¹˜çºœè»Šè»Šç¨‹ç´„5åˆ†é˜(çºœè»Š6åˆ†ä¸€ç­)ã€‚\nçºœè»Šé€£æ¥ç´…é›²äº­ç«™å’Œå±±é ‚ç«™ï¼Œæ¯12åˆ†é˜ä¸€ç­ã€‚",
                "type": "transport"
            },
            {
                "time": "11:00-13:00",
                "location": "å¯’éœæºª",
                "note": "ä¹˜åçºœè»Šåˆ°å±±é ‚ï¼Œç„¶å¾Œå¾’æ­¥ä¸‹å±±",
                "type": "sightseeing",
                "description": "æ—¥æœ¬ä¸‰å¤§æºªè°·ä¹‹ä¸€ï¼Œä»¥ç§‹å¤©çš„ç´…è‘‰èåã€‚å³ä¾¿ä¸æ˜¯ç´…è‘‰å­£ï¼Œå¥‡å²©æ€ªçŸ³çš„æ™¯è§€ä¹Ÿéå¸¸å£¯è§€ã€‚å»ºè­°æ­çºœè»Šä¸Šå±±ï¼Œæ¬£è³ç€¨æˆ¶å…§æµ·å…¨æ™¯ï¼Œç„¶å¾Œå¦‚æœé«”åŠ›å…è¨±ï¼Œå¯ä»¥èµ°ç™»å±±æ­¥é“ä¸‹å±±æ„Ÿå—å¤§è‡ªç„¶ã€‚"
            },
            {
                "time": "13:00-13:17",
                "location": "ç´…é›²äº­-ã‚ªãƒªãƒ¼ãƒ–å…¬åœ’å£",
                "note": "å¯’éœæºªæ€¥è¡Œç·š(ç´…é›²äº­ç«™)è‡³æ©„æ¬–å…¬åœ’ï¼ˆé…åˆæ™¯é»æ™‚é–“ï¼Œèª¿æ•´å·´å£«æŠµé”æ™‚é–“ï¼‰",
                "type": "transport"
            },
            {
                "time": "13:17-14:30",
                "location": "æ©„æ¬–å…¬åœ’",
                "note": "æ‹æ”é­”å¥³å®…æ€¥ä¾¿é¢¨è»Šç…§ï¼Œé€›å¸Œè‡˜é¢¨æ ¼çš„å»ºç¯‰ç‰©å’Œåº­åœ’",
                "type": "sightseeing",
                "description": "é€™è£¡å°±æ˜¯çœŸäººç‰ˆã€Šé­”å¥³å®…æ€¥ä¾¿ã€‹çš„æ‹æ”åœ°ï¼è¨˜å¾—å…ˆå»ç´€å¿µé¤¨å…è²»ç§Ÿå€Ÿã€Œé­”æ³•æƒå¸šã€ï¼Œç„¶å¾Œåˆ°ç™½è‰²å¸Œè‡˜é¢¨è»Šå‰æ‹è·³èºç…§ã€‚åœ’å€å…§é‚„æœ‰è¨±å¤šç¨®æ¤æ©„æ¬–æ¨¹çš„æ­¥é“ï¼Œå……æ»¿åœ°ä¸­æµ·é¢¨æƒ…ã€‚"
            },
            {
                "time": "15:00-15:22",
                "location": "ã‚ªãƒªãƒ¼ãƒ–å…¬åœ’å£-åœ‹éš›ãƒ›ãƒ†ãƒ«",
                "note": "ç”°ãƒæµ¦æ˜ ç”»æ‘ç·š(æ©„æ¬–å…¬åœ’åˆ°å¤©ä½¿ä¹‹è·¯)\nåœ‹éš›ãƒ›ãƒ†ãƒ«ä¸‹è»Šæ­¥è¡Œ5åˆ†é˜åˆ°å¤©ä½¿ä¹‹è·¯",
                "type": "transport"
            },
            {
                "time": "15:30-16:00",
                "location": "å¤©ä½¿ä¹‹è·¯",
                "note": "å…ˆæŸ¥è©¢ç•¶å¤©çš„æ½®æ±æ‹ç…§ã€æ¬£è³é¢¨æ™¯",
                "type": "sightseeing",
                "description": "é€™æ˜¯ä¸€æ¢åªåœ¨é€€æ½®æ™‚æ‰æœƒå‡ºç¾çš„æ²™æ´²è·¯ï¼Œé€£æ¥å°å³¶èˆ‡æœ¬å³¶ï¼Œå‚³èªªæˆ€äººæ‰‹ç‰½æ‰‹èµ°éæœƒå¾—åˆ°å¹¸ç¦ã€‚å‹™å¿…ç¢ºèªç•¶å¤©çš„ä¹¾æ½®æ™‚é–“ï¼Œå‰å¾Œç´„2-3å°æ™‚å¯ä»¥é€šè¡Œã€‚"
            },
            {
                "time": "16:58-17:08",
                "location": "åœ‹éš›ãƒ›ãƒ†ãƒ«-åœŸåº„æ¸¯",
                "note": "ç”°ãƒæµ¦æ˜ ç”»æ‘ç·š(å¤©ä½¿ä¹‹è·¯åˆ°åœŸåº„æ¸¯)èµ°å›åœ‹éš›ãƒ›ãƒ†ãƒ«æ­è»Š",
                "type": "transport"
            },
            {
                "time": "17:30-18:30",
                "location": "åœŸåº„æ¸¯-é«˜æ¾",
                "note": "å›ç¨‹èˆ¹ç­ (èˆªè¡Œç´„1å°æ™‚)",
                "type": "transport"
            },
            {
                "time": "æ™šé¤",
                "location": "æ™šé¤",
                "note": "åœ¨é«˜æ¾æ¸¯å‘¨é‚Šæˆ–å‰å¾€é£¯åº—é€”ä¸­ç”¨é¤",
                "type": "dining",
                "description": "ï¼ˆå°šæœªæŒ‡å®šé¤å»³ï¼‰å»ºè­°å¯åœ¨é«˜æ¾æ¸¯å‘¨é‚Šå°‹æ‰¾é¤å»³ï¼Œæˆ–å“åšé¦™å·ç¸£è‘—åçš„éª¨ä»˜é³¥ï¼ˆå¸¶éª¨çƒ¤é›è…¿ï¼‰ã€‚"
            },
            {
                "time": "Check-in",
                "location": "FAV HOTEL TAKAMATSU",
                "note": "JRé«˜æ¾ç«™æ­¥è¡Œ5åˆ†é˜è‡³é«˜æ¾ç¯‰æ¸¯ç«™ä¹˜ç´å¹³é›»éµå¹³ç·šåœ¨ç“¦ç”ºç«™ä¸‹è»Š(è»Šç¨‹7åˆ†é˜)ã€‚\nç“¦ç”ºç«™æ­¥è¡Œç´„4åˆ†é˜(ç´„400å…¬å°º)å³å¯æŠµé”",
                "type": "stay"
            }
        ]
    },
    {
        "date": "12/1(ä¸€)",
        "theme": "é«˜æ¾/ç¦å±±",
        "city": "é«˜æ¾ãƒ»ç¦å±±",
        "events": [
            {
                "time": "08:00-08:25",
                "location": "é£¯åº—-é«˜æ¾ç«™",
                "note": "æ­¥è¡Œè‡³ç“¦ç”ºç«™æ­ä¹˜ç´é›»è‡³é«˜æ¾ç¯‰æ¸¯ï¼Œæ­¥è¡Œåˆ°JRé«˜æ¾ç«™ï¼Œå¯„æ”¾3ä»¶å¤§è¡Œæè‡³ç½®ç‰©æ«ƒ",
                "type": "transport"
            },
            {
                "time": "08:25-08:35",
                "location": "é«˜æ¾ç«™-æ —æ—å…¬åœ’åŒ—å£ç«™",
                "note": "æ­ä¹˜JR åˆ—è»Šï¼Œå†æ­¥è¡Œè‡³æ —æ—å…¬åœ’ã€‚ç­æ¬¡:08:33ã€09:42ã€‚\n\n(JRç·šï¼š\nJRæ —æ—å…¬åœ’åŒ—å£ç«™ï¼šæ­¥è¡Œ3åˆ†é˜ï¼Œæœ€è¿‘ä½†ç­æ¬¡è¼ƒå°‘ã€‚\nJRæ —æ—ç«™ï¼šæ­¥è¡Œ20åˆ†é˜ï¼Œè·é›¢ç¨é ã€‚\nç´é›»é›»è»Šï¼šç´é›»æ —æ—å…¬åœ’ç«™æ­¥è¡Œ10åˆ†é˜ï¼Œç­æ¬¡é »ç¹ï¼Œæ˜¯è¼ƒç‚ºç†æƒ³çš„é¸æ“‡ã€‚\nç´é›»å·´å£«ï¼šå¾é«˜æ¾ç«™æ­ä¹˜ç´„20åˆ†é˜å¯æŠµé”ã€‚)",
                "type": "transport"
            },
            {
                "time": "08:45-11:15",
                "location": "æ —æ—å…¬åœ’",
                "note": "æ¬£è³æ—¥æœ¬æœ€ç¾åº­åœ’",
                "type": "sightseeing",
                "description": "ç²å¾—ç±³å…¶æ—ä¸‰æ˜Ÿè©•åƒ¹çš„æ—¥æœ¬åº­åœ’ï¼Œä¸€æ­¥ä¸€æ™¯ã€‚å¿…å®šè¦çœ‹çš„æ˜¯ã€Œé£›ä¾†å³°ã€ï¼Œå¯ä»¥å¾é«˜è™•ä¿¯ç°åƒæœˆæ©‹èˆ‡æ¹–é¢ï¼Œæ˜¯ç¶“å…¸çš„æ˜ä¿¡ç‰‡è§’åº¦ã€‚ä¹Ÿå¯ä»¥åœ¨æ­¤é«”é©—æ­ä¹˜å’Œèˆ¹éŠæ¹–ã€‚"
            },
            {
                "time": "11:25-11:35",
                "location": "æ —æ—å…¬åœ’åŒ—å£ç«™-é«˜æ¾ç«™",
                "note": "JR åˆ—è»Šã€‚ç­æ¬¡:10:54ã€11:31ã€11:54",
                "type": "transport"
            },
            {
                "time": "11:45-12:45",
                "location": "ç‰è—»å…¬åœ’ (é«˜æ¾åŸè·¡)",
                "note": "éŠè¦½é«˜æ¾åŸéºå€ã€‚å¾é«˜æ¾ç«™æ­¥è¡Œ10åˆ†é˜",
                "type": "sightseeing",
                "description": "æ—¥æœ¬ä¸‰å¤§æ°´åŸä¹‹ä¸€ï¼Œè­·åŸæ²³ç›´æ¥å¼•å…¥æµ·æ°´ï¼Œå› æ­¤æ± è£¡å¯ä»¥çœ‹åˆ°é¯›é­šæ¸¸æ³³ï¼é€™è£¡æœ‰ç¨ç‰¹çš„ã€Œé¯›é¡˜æˆå°±ã€é¤µé­šé«”é©—ã€‚"
            },
            {
                "time": "12:45-13:30",
                "location": "åˆé¤/å–è¡Œæ",
                "note": "åœ¨JRç«™å‘¨é‚Šç”¨é¤",
                "type": "dining",
                "description": "ï¼ˆå°šæœªæŒ‡å®šé¤å»³ï¼‰é«˜æ¾ç«™äºŒæ¨“æœ‰ã€Œæ‹‰éºµæ¸¯å£ã€æˆ–è»Šç«™ä¾¿ç•¶å¯ä¾›é¸æ“‡ã€‚æ—¢ç„¶ä¾†åˆ°é¦™å·ï¼Œä¹Ÿå¯ä»¥æŠŠæ¡æœ€å¾Œæ©Ÿæœƒå†åƒä¸€æ¬¡è®šå²çƒé¾éºµã€‚"
            },
            {
                "time": "14:10-15:02",
                "location": "é«˜æ¾ç«™-å²¡å±±ç«™",
                "note": "MarineLinerï¼Œç­æ¬¡13:40ã€14:10ã€14:40ã€15:10(è»Šç¨‹ç´„55åˆ†é˜)",
                "type": "transport"
            },
            {
                "time": "15:11-15:27",
                "location": "å²¡å±±ç«™-ç¦å±±ç«™",
                "note": "JRå±±é™½æ–°å¹¹ç·šï¼Œç­æ¬¡15:11ã€15:50ã€15:47ã€16:11(è»Šç¨‹ç´„20åˆ†é˜)",
                "type": "transport"
            },
            {
                "time": "Check-in",
                "location": "Daiwa Roynet Hotel Fukuyama Ekimae",
                "type": "stay"
            },
            {
                "time": "16:30-17:30",
                "location": "ç¦å±±åŸå…¬åœ’",
                "note": "å¤©å®ˆå¤–è§€ã€çŸ³å£ã€è­·åŸæ²³",
                "type": "sightseeing",
                "description": "è·é›¢æ–°å¹¹ç·šè»Šç«™æœ€è¿‘çš„åŸå ¡ï¼2022å¹´å‰›å®Œæˆç¯‰åŸ400é€±å¹´çš„å¤§ä¿®ã€‚æœ€ç‰¹åˆ¥çš„æ˜¯åŒ—å´å¤©å®ˆç‰†é¢è¦†è“‹è‘—é»‘è‰²éµæ¿ï¼Œé€™æ˜¯ç‚ºäº†é˜²ç¦¦ç•¶å¹´å‡æƒ³æ•µçš„ç ²æ“Šï¼Œæ˜¯å…¨æ—¥æœ¬å”¯ä¸€çš„è¨­è¨ˆã€‚"
            },
            {
                "time": "æ™šé¤",
                "location": "ãŠå¥½ã¿ç„¼ã é‰„æ¿ç„¼ã ã„ã¤ã¡ã‚ƒã‚“",
                "note": "åœ¨åœ°ååº— (900-1,200 æ—¥åœ“)",
                "type": "dining",
                "description": "é€™æ˜¯ä¸€é–“æ·±å—ç•¶åœ°äººå–œæ„›çš„å»£å³¶ç‡’ï¼ˆæˆ–ç¨±åºœä¸­ç‡’/ç¦å±±ç‡’ï¼‰å°åº—ã€‚ç‰¹è‰²æ˜¯ä½¿ç”¨å¤§é‡çš„åˆ‡çµ²é«˜éº—èœï¼Œå£æ„Ÿé®®ç”œï¼Œæ­é…ç‰¹è£½é†¬æ±éå¸¸ç¾å‘³ã€‚"
            },
            {
                "time": "æ™šä¸Š",
                "location": "å®®é€šã‚Šå•†åº—è¡—",
                "note": "å•†åº—è¡—",
                "type": "sightseeing",
                "description": "ç¦å±±è»Šç«™é™„è¿‘çš„å¾©å¤å•†åº—è¡—ï¼Œé›–ç„¶ä¸åƒå¤§åŸå¸‚é‚£æ¨£ç¹è¯ï¼Œä½†ä¿ç•™äº†æ˜­å’Œæ™‚ä»£çš„æ°›åœã€‚å¯ä»¥åœ¨æ­¤æ•£æ­¥æ„Ÿå—åœ¨åœ°ç”Ÿæ´»æ„Ÿï¼Œæˆ–å°‹æ‰¾å··å¼„è£¡çš„å°é…’å§ã€‚"
            }
        ]
    },
    {
        "date": "12/2(äºŒ)",
        "theme": "å³¶æ³¢æµ·é“",
        "city": "å°¾é“ãƒ»ç”Ÿå£å³¶",
        "events": [
            {
                "time": "07:45-08:06",
                "location": "ç¦å±±ç«™-å°¾é“ç«™",
                "note": "ç­æ¬¡:07:45ã€07:58(è»Šç¨‹21åˆ†é˜)",
                "type": "transport"
            },
            {
                "time": "08:10-08:50",
                "location": "å°¾é“ç«™ç§Ÿå–®è»Š / æ¸¡èˆ¹è‡³å‘å³¶",
                "note": "é ç´„8:30åˆ°å°¾é“ç«™è‡ªè¡Œè»Šç§Ÿå€Ÿé»",
                "type": "transport"
            },
            {
                "time": "08:50-13:00",
                "location": "é¨å–®è»Šï¼šå‘å³¶â†’å› å³¶â†’ç”Ÿå£å³¶â†’ç€¨æˆ¶ç”°æ¸¯",
                "note": "å…¨ç¨‹ç´„26å…¬é‡Œï¼Œè¼•é¬†é¨ç´„2.5å°æ™‚",
                "type": "transport"
            },
            {
                "time": "13:00-14:20",
                "location": "åˆé¤ (ã—ã¾ãªã¿ãƒ­ãƒãƒ³ç€¬æˆ¸ç”°æ¸¯)",
                "note": "æä¾›ä¸¼é£¯å¤šç¨®ç¶“å…¸æ–™ç†",
                "type": "dining",
                "description": "ä½æ–¼ç€¨æˆ¶ç”°æ¸¯æ—çš„é¤å»³ï¼Œåœ°ç†ä½ç½®æ¥µä½³ã€‚æ¨è–¦ä»–å€‘çš„æª¸æª¬è±¬è‚‰ä¸¼æˆ–æµ·é®®ä¸¼ï¼Œé£Ÿææ–°é®®ï¼Œä¹Ÿèƒ½å“å˜—åˆ°ç€¨æˆ¶å…§æµ·ç‰¹ç”¢çš„æª¸æª¬é¢¨å‘³æ–™ç†ã€‚"
            },
            {
                "time": "14:20-14:35",
                "location": "é‚„å–®è»Š",
                "note": "ç€¨æˆ¶ç”°è§€å…‰æ¡ˆå†…æ‰€",
                "type": "activity"
            },
            {
                "time": "15:00-15:44",
                "location": "ç€¨æˆ¶ç”°æ¸¯â†’å°¾é“è»Šç«™",
                "note": "14:45 å·¦å³å»è²·ç¥¨æ¸¡è¼ªèˆªç¨‹ç´„40åˆ†é˜(1.5ï½2å°æ™‚æ‰æœ‰ä¸€ç­ï¼Œå‰ä¸€ç­èˆ¹æ˜¯13:25)",
                "type": "transport"
            },
            {
                "time": "15:50-16:10",
                "location": "å°¾é“è»Šç«™â†’çºœè»Šå±±éº“ç«™",
                "note": "æ­¥è¡Œç´„ 15 åˆ†é˜(å°¾é“åœ¨12æœˆåˆçš„æ—¥è½æ™‚é–“å¤§ç´„åœ¨ 16:50è‡³17:00 ä¹‹é–“)",
                "type": "transport"
            },
            {
                "time": "16:10-16:20",
                "location": "åƒå…‰å¯ºå…¬åœ’å±•æœ›å°",
                "note": "æ­çºœè»Šä¸Šå±± (è»Šç¨‹3åˆ†é˜)ï¼Œå±•æœ›å°çœºæœ›ç€¨æˆ¶å…§æµ·çš„å³¶å¶¼é¢¨å…‰ã€‚\nåƒå…‰å¯ºå±±çºœè»Šç”¨JR PASSæŠ˜æ‰£(å¤§äººå¾€è¿”700æ—¥åœ“â†’630æ—¥åœ“)",
                "type": "transport"
            },
            {
                "time": "16:20-17:45",
                "location": "åƒå…‰å¯º â†’ è²“ä¹‹ç´°é“ â†’ å°¾é“è»Šç«™",
                "note": "é †è‘—ã€Œæ–‡å­¸ä¹‹é“ã€æ…¢æ…¢æ­¥è¡Œä¸‹å±±",
                "type": "sightseeing",
                "description": "ä¸‹å±±é€”ä¸­æœƒç¶“éè¨±å¤šæ–‡äººå¢¨å®¢å–œæ„›çš„å°å¾‘ã€‚ã€Œè²“ä¹‹ç´°é“ã€æœ‰å¾ˆå¤šç¦çŸ³è²“ï¼Œæ˜¯æ„›è²“äººå£«å¿…è¨ªä¹‹åœ°ã€‚æ²¿é€”æœ‰è¨±å¤šå¤æ°‘å®¶æ”¹å»ºçš„å’–å•¡å»³ï¼Œæ°›åœéå¸¸å¾©å¤è¿·äººã€‚"
            },
            {
                "time": "17:45-18:10",
                "location": "æ™šé¤ (æœˆæ³¢é£Ÿå ‚)",
                "note": "è·å°¾é“ç«™ç´„300å…¬å°ºï¼Œå®šé£Ÿç´„Â¥1000ä»¥ä¸‹",
                "type": "dining",
                "description": "ä¸€é–“æº«é¦¨çš„å°é£Ÿå ‚ï¼Œæä¾›æ¨¸å¯¦ç¾å‘³çš„æ—¥å¼å®¶åº­æ–™ç†ã€‚æ¨è–¦ç•¶æ—¥å®šé£Ÿæˆ–é­šæ–™ç†ï¼Œåƒ¹æ ¼è¦ªæ°‘ï¼Œèƒ½æ„Ÿå—åˆ°åœ¨åœ°çš„äººæƒ…å‘³ã€‚"
            },
            {
                "time": "18:29-18:50",
                "location": "å°¾é“ç«™-ç¦å±±ç«™",
                "note": "JRå±±é™½æœ¬ç·š",
                "type": "transport"
            }
        ]
    },
    {
        "date": "12/3(ä¸‰)",
        "theme": "å»£å³¶",
        "city": "å»£å³¶",
        "events": [
            {
                "time": "08:25-08:49",
                "location": "ç¦å±±ç«™-å»£å³¶ç«™",
                "note": "æ–°å¹¹ç·šï¼Œç­æ¬¡:07:33ã€07:55ã€08:13ã€08:25 (è»Šç¨‹24åˆ†é˜)",
                "type": "transport"
            },
            {
                "time": "08:50-09:20",
                "location": "å»£å³¶ç«™-åŸçˆ†åœ“é ‚é¤¨",
                "note": "æ­ä¹˜é›»è»Š",
                "type": "transport"
            },
            {
                "time": "09:20-09:40",
                "location": "åŸçˆ†åœ“é ‚é¤¨",
                "note": "é–‹æ”¾çš„æˆ¶å¤–éºå€",
                "type": "sightseeing",
                "description": "ä¸–ç•Œæ–‡åŒ–éºç”¢ï¼ŒåŸç‚ºå»£å³¶ç¸£ç”¢æ¥­çå‹µé¤¨ã€‚1945å¹´åŸå­å½ˆåœ¨å…¶ä¸Šæ–¹çˆ†ç‚¸ï¼Œå¥‡è¹Ÿä¼¼åœ°ä¿ç•™äº†éƒ¨åˆ†å»ºç¯‰çµæ§‹ã€‚é€™åº§å»ºç¯‰æ˜¯è­¦æƒ•ä¸–äººæˆ°çˆ­æ®˜é…·èˆ‡ç¥ˆæ±‚å’Œå¹³çš„é‡è¦è±¡å¾µã€‚"
            },
            {
                "time": "10:00-12:00",
                "location": "å’Œå¹³ç´€å¿µè³‡æ–™é¤¨",
                "note": "æ­¥è¡Œç´„7åˆ†é˜ï¼ˆç´„500å…¬å°ºï¼‰ï¼Œç©¿éå…ƒå®‰æ©‹å³å¯æŠµé”è³‡æ–™é¤¨",
                "type": "sightseeing",
                "description": "é¤¨å…§å±•ç¤ºäº†åŸå­å½ˆçˆ†ç‚¸å¾Œçš„æ…˜æ³ã€å—å®³è€…çš„éºç‰©èˆ‡è­‰è¨€ã€‚é›–ç„¶å…§å®¹æ²‰é‡ï¼Œä½†èƒ½è®“äººæ·±åˆ»åæ€æ ¸æ­¦çš„å¯æ€•èˆ‡å’Œå¹³çš„çè²´ã€‚å»ºè­°ç§Ÿå€ŸèªéŸ³å°è¦½ä»¥ç²å¾—å®Œæ•´é«”é©—ã€‚"
            },
            {
                "time": "12:15-13:30",
                "location": "åˆé¤ (ç´™é¶´å»£å ´é™„è¿‘)",
                "note": "æ­¥è¡Œç´„ 9 åˆ†é˜ï¼ˆç´„650å…¬å°ºï¼‰ï¼Œäº«ç”¨å»£å³¶åç‰©ã€Œå»£å³¶ç‡’ã€",
                "type": "dining",
                "description": "ï¼ˆå°šæœªæŒ‡å®šé¤å»³ï¼‰é€™é™„è¿‘æœ‰è‘—åçš„ã€ŒOkonomimuraï¼ˆå»£å³¶ç‡’æ‘ï¼‰ã€æˆ–ã€Œé•·ç”°å±‹ã€ï¼Œéƒ½æ˜¯å“åšæ­£å®—å»£å³¶ç‡’çš„å¥½åœ°æ–¹ã€‚å»£å³¶ç‡’çš„ç‰¹è‰²æ˜¯å±¤å±¤å †ç–Šçš„éºµæ¢å’Œé…æ–™ã€‚"
            },
            {
                "time": "13:30-14:00",
                "location": "ç´™é¶´å»£å ´",
                "note": "",
                "type": "sightseeing",
                "description": "é€™æ˜¯ä¸€åº§è¤‡åˆå¼å•†æ¥­è¨­æ–½ï¼Œé ‚æ¨“æœ‰æœ¨è³ªå±•æœ›å°ã€ŒHIROSHIMA HILLSã€ï¼Œå¯ä»¥ä¿¯ç°åŸçˆ†åœ“é ‚é¤¨å’Œå»£å³¶å¸‚æ™¯ã€‚é€™è£¡é‚„æœ‰ä¸€å€‹ç‰¹è‰²æ´»å‹•æ˜¯ã€Œç´™é¶´æŠ•å…¥ç‰†ã€ï¼Œå¯ä»¥è¦ªæ‰‹æ‘ºç´™é¶´ä¸¦æŠ•å…¥ç»ç’ƒç‰†ä¸­ã€‚"
            },
            {
                "time": "14:20-15:00",
                "location": "å»£å³¶åŸ",
                "note": "è¢«åŸå­å½ˆæ‘§æ¯€å¾Œé‡å»º",
                "type": "sightseeing",
                "description": "åˆ¥åã€Œé¯‰åŸã€ï¼ŒåŸæœ¬çš„å¤©å®ˆé–£åœ¨åŸçˆ†ä¸­å€’å¡Œï¼Œç¾åœ¨çœ‹åˆ°çš„æ˜¯1958å¹´é‡å»ºçš„ã€‚å…§éƒ¨æ˜¯æ­·å²åšç‰©é¤¨ï¼Œä»‹ç´¹å»£å³¶åŸçš„æ­·å²èˆ‡æ­¦å£«æ–‡åŒ–ã€‚è‹¥æœ‰æ™‚é–“å¯ä»¥ç™»ä¸Šå¤©å®ˆé–£é ‚å±¤å±•æœ›å°ã€‚"
            },
            {
                "time": "15:10-17:00",
                "location": "ç¸®æ™¯åœ’",
                "note": "ç¾éº—çš„åº­åœ’",
                "type": "sightseeing",
                "description": "é€™æ˜¯ä¸€åº§æ±Ÿæˆ¶æ™‚ä»£çš„å¤§ååº­åœ’ï¼Œåç¨±å¯“æ„ç‚ºã€Œæ¿ƒç¸®äº†å„åœ°çš„ç¾æ™¯ã€ã€‚åº­åœ’ä¸­å¤®æœ‰æ¿¯çº“æ± ï¼Œå‘¨åœç’°ç¹è‘—å°å±±ã€å°æ©‹èˆ‡èŒ¶å®¤ï¼Œå››å­£éƒ½æœ‰ä¸åŒçš„èŠ±å‰ç››é–‹ï¼Œéå¸¸é©åˆæ•£æ­¥ã€‚"
            },
            {
                "time": "17:15-19:30",
                "location": "é€›è¡—èˆ‡æ™šé¤ (æœ¬é€šå•†åº—è¡—)",
                "note": "å»£å³¶æœ€ç†±é¬§çš„è³¼ç‰©å€",
                "type": "dining",
                "description": "å»£å³¶æœ€å¤§çš„æ‹±å»Šå•†åº—è¡—ï¼Œèšé›†äº†è—¥å¦åº—ã€æœé£¾åº—å’Œå„ç¨®é¤å»³ã€‚æ™šé¤å¯ä»¥åœ¨é€™è£¡å°‹æ‰¾å»£å³¶è‘—åçš„æ²¾éºµã€ç‰¡è £æ–™ç†æˆ–ç©´å­é£¯ã€‚"
            },
            {
                "time": "æ™šé¤",
                "location": "ç‰¡è £æ˜Ÿé°»å£½å¸é£¯ä¾¿ç•¶",
                "note": "åœ¨è»Šç«™å…§å¯ä»¥è²·åˆ°ï¼Œåƒ¹æ ¼ç´„1,300æ—¥åœ“",
                "type": "dining",
                "description": "å»£å³¶ç«™çš„æ–°å¹¹ç·šå£æœ‰è¨±å¤šè²©è³£ã€Œé§…å¼ï¼ˆè»Šç«™ä¾¿ç•¶ï¼‰ã€çš„åº—èˆ–ã€‚æ¨è–¦å¿…è²·åŒ…å«å»£å³¶å…©å¤§åç”¢â€”â€”ç‰¡è £å’Œæ˜Ÿé°»ï¼ˆç©´å­ï¼‰çš„ä¾¿ç•¶ï¼Œåœ¨å›ç¨‹çš„æ–°å¹¹ç·šä¸Šäº«ç”¨ã€‚"
            },
            {
                "time": "æ™šä¸Š",
                "location": "å»£å³¶ç«™-ç¦å±±ç«™",
                "note": "æ­æ–°å¹¹ç·šï¼Œç­æ¬¡:19:21ã€19:53(è»Šç¨‹ç´„25åˆ†)",
                "type": "transport"
            }
        ]
    },
    {
        "date": "12/4(å››)",
        "theme": "å®®å³¶",
        "city": "å®®å³¶",
        "events": [
            {
                "time": "08:25-08:49",
                "location": "ç¦å±±ç«™-å»£å³¶ç«™",
                "note": "æ–°å¹¹ç·šï¼Œç­æ¬¡:07:33ã€07:55ã€08:13ã€08:25 (è»Šç¨‹24åˆ†é˜)",
                "type": "transport"
            },
            {
                "time": "09:00-09:27",
                "location": "å»£å³¶ç«™-å®®å³¶æ¸¯",
                "note": "JRè‡³å®®å³¶å£ç«™ç´„27åˆ†ï¼Œè»Šè³‡ç´„ï¿¥420ã€‚è½‰JRè¥¿æ—¥æœ¬å®®å³¶æ¸¡è¼ª",
                "type": "transport"
            },
            {
                "time": "10:15-11:15",
                "location": "åš´å³¶ç¥ç¤¾",
                "note": "æµ·ä¸Šå¤§é³¥å±… (æ¸¡è¼ªæœƒç¹è¡Œé è¿‘)",
                "type": "sightseeing",
                "description": "å»ºç«‹åœ¨æµ·ä¸Šçš„ç¥ç¤¾ï¼Œæ¼²æ½®æ™‚å½·å½¿æ¼‚æµ®åœ¨æ°´é¢ã€‚æœ€çŸ¥åçš„å¤§é³¥å±…é«˜é”16å…¬å°ºï¼Œå¦‚æœæ˜¯é€€æ½®æ™‚é–“ï¼Œå¯ä»¥ç›´æ¥èµ°åˆ°é³¥å±…åº•ä¸‹è§€çœ‹ã€‚"
            },
            {
                "time": "11:50-12:50",
                "location": "è¡¨åƒé“å•†åº—è¡— / åˆé¤",
                "note": "ã¿ã‚„ã˜ã¾é£Ÿå ‚ (ç‰¡è £é£¯å®šé£ŸÂ¥1000å·¦å³)",
                "type": "dining",
                "description": "å®®å³¶æœ€ç†±é¬§çš„å•†åº—è¡—ï¼Œé€™è£¡æœ‰å„å¼å„æ¨£çš„ç‰¡è £æ–™ç†ï¼ˆç‚¸ç‰¡è £ã€çƒ¤ç‰¡è £ï¼‰ã€ç´…è‘‰é¥…é ­ï¼ˆç”šè‡³æœ‰ç‚¸çš„ï¼ï¼‰ï¼Œé‚„æœ‰å·¨å¤§çš„é£¯åŒ™ç´€å¿µå“ã€‚å°å¿ƒé€™è£¡çš„é¹¿æœƒæ¶é£Ÿç‰©å–”ï¼"
            },
            {
                "time": "13:00-14:20",
                "location": "å®®å³¶çºœè»Š / å½Œå±±é ‚éƒ¨",
                "note": "å¦‚æ’éšŠæ™‚é–“é•·ï¼Œå¯è€ƒæ…®æ”¾æ£„å¤§è–é™¢æˆ–ç¸®çŸ­è³¼ç‰©æ™‚é–“",
                "type": "sightseeing",
                "description": "å½Œå±±æ˜¯å®®å³¶çš„æœ€é«˜å³°ï¼Œè‡ªå¤ä»¥ä¾†å°±è¢«è¦–ç‚ºç¥å±±ã€‚æ­ä¹˜çºœè»Šä¸Šå±±å¾Œï¼Œå¯ä»¥æŠµé”ç…å­å²©å±•æœ›å°ï¼Œçœºæœ›ç€¨æˆ¶å…§æµ·çš„çµ•ç¾ç¾¤å³¶æ™¯è‰²ã€‚è‹¥é«”åŠ›å…è¨±ï¼Œå¯å†å¾’æ­¥ç´„30åˆ†é˜ç™»ä¸Šå±±é ‚ã€‚"
            },
            {
                "time": "14:20-15:20",
                "location": "å¤§è–é™¢",
                "note": "",
                "type": "sightseeing",
                "description": "å®®å³¶æ­·å²æœ€å¤è€çš„å¯ºé™¢ï¼Œèˆ‡ç©ºæµ·å¤§å¸«æœ‰æ·±åšæ·µæºã€‚å¢ƒå…§æœ‰äº”ç™¾ç¾…æ¼¢åƒï¼ˆæˆ´è‘—æ¯›ç·šå¸½éå¸¸å¯æ„›ï¼‰ã€éç…§çªŸï¼ˆæ›æ»¿ç‡ˆç± çš„æ´çªŸï¼‰ï¼Œæ°£æ°›èŠåš´ä¸”å……æ»¿éˆæ°£ã€‚"
            },
            {
                "time": "15:47-16:14",
                "location": "å®®å³¶å£ç«™-å»£å³¶ç«™",
                "note": "JR",
                "type": "transport"
            },
            {
                "time": "16:30-17:00",
                "location": "å»£å³¶ç«™-ç¦å±±ç«™",
                "note": "æ–°å¹¹ç·š",
                "type": "transport"
            },
            {
                "time": "æ™šä¸Š",
                "location": "ç¦å±±ç«™-å²¡å±±ç«™",
                "note": "å…ˆè‡³é£¯åº—å–è¡Œæï¼Œå†æ­æ–°å¹¹ç·š",
                "type": "transport"
            },
            {
                "time": "Check-in",
                "location": "å¤§å’ŒRoyneté£¯åº—-å²¡å±±ç«™å‰",
                "note": "",
                "type": "stay"
            }
        ]
    },
    {
        "date": "12/5(äº”)",
        "theme": "ç¥æˆ¶",
        "city": "ç¥æˆ¶",
        "events": [
            {
                "time": "08:29-09:00",
                "location": "å²¡å±±ç«™-æ–°ç¥æˆ¶è»Šç«™",
                "note": "ç­æ¬¡:07:41ã€08:29ã€08:34(è»Šç¨‹50åˆ†é˜)",
                "type": "transport"
            },
            {
                "time": "09:00-12:00",
                "location": "åŒ—é‡ç•°äººé¤¨è¡—",
                "note": "é¢¨è¦‹é›é¤¨å’ŒèŒé»ƒä¹‹é¤¨æœ€å…·ä»£è¡¨æ€§",
                "type": "sightseeing",
                "description": "å……æ»¿ç•°åœ‹æƒ…èª¿çš„å€åŸŸï¼Œä¿ç•™äº†è¨±å¤šæ˜æ²»æ™‚æœŸå¤–åœ‹äººå±…ä½çš„æ´‹æˆ¿ã€‚é€™è£¡çš„è¡—é“å¡åº¦è¼ƒé™¡ï¼Œå»ºè­°ç©¿å¥½èµ°çš„é‹å­ã€‚è·¯é‚Šä¹Ÿæœ‰è¨±å¤šç‰¹è‰²å°åº—å’Œæ˜Ÿå·´å…‹æ¦‚å¿µåº—ã€‚"
            },
            {
                "time": "13:00-13:30",
                "location": "ç”Ÿç”°ç¥ç¤¾",
                "note": "",
                "type": "sightseeing",
                "description": "æ“æœ‰1800å¹´ä»¥ä¸Šæ­·å²çš„å¤è€ç¥ç¤¾ï¼Œæ˜¯ç¥æˆ¶åœ°åçš„ç”±ä¾†ï¼Œä¹Ÿæ˜¯è‘—åçš„ã€Œæˆ€æ„›çµç·£ã€ç¥ç¤¾ã€‚å¢ƒå…§çš„ã€Œç”Ÿç”°ä¹‹æ£®ã€æ˜¯åŸå¸‚ä¸­çš„ä¸€ç‰‡ç¶ æ´²ã€‚"
            },
            {
                "time": "13:30-15:30",
                "location": "å—äº¬ç”º",
                "note": "åˆé¤ï¼šé¾é³³é…’å®¶(å»£æ±é¢¨æ’éª¨é£¯ç‰›è…©é£¯)",
                "type": "dining",
                "description": "æ—¥æœ¬ä¸‰å¤§ä¸­è¯è¡—ä¹‹ä¸€ï¼Œå……æ»¿æ´»åŠ›çš„ç´…è‰²å»ºç¯‰èˆ‡å„å¼å°åƒæ”¤è²©ã€‚é™¤äº†é¾é³³é…’å®¶å¤–ï¼Œä¸€å®šè¦åšåšã€Œè€ç¥¥è¨˜ã€çš„è±¬è‚‰åŒ…ï¼Œç¸½æ˜¯æ’è‘—é•·é•·çš„äººé¾ã€‚"
            },
            {
                "time": "15:30-16:30",
                "location": "ç¾åˆ©å …å…¬åœ’",
                "note": "çœ‹æ¸¯å£å¤œæ™¯ã€ç¥æˆ¶æ¸¯å¡”ã€BE KOBE æ‰“å¡é»ã€‚",
                "type": "sightseeing",
                "description": "ç¥æˆ¶æ¸¯é‚Šçš„é–‹æ”¾å¼å…¬åœ’ï¼Œæ“æœ‰åœ°æ¨™æ€§çš„ç´…è‰²ç¥æˆ¶æ¸¯å¡”å’Œåƒå¸†èˆ¹ä¸€æ¨£çš„æµ·æ´‹åšç‰©é¤¨ã€‚é€™è£¡é‚„æœ‰å·¨å¤§çš„ã€ŒBE KOBEã€ç´€å¿µç¢‘ï¼Œæ˜¯ç†±é–€çš„æ‹ç…§æ‰“å¡é»ã€‚"
            },
            {
                "time": "æ™šé¤",
                "location": "ç¥æˆ¶ç‰›Steakland Kobe-kan",
                "note": "æ­¥è¡Œåˆ°ã€Œå…ƒç”ºç«™ã€10-15 åˆ†é˜ï¼Œå…ƒç”ºé™„è¿‘åƒæ™šé¤ç¥æˆ¶ç‰›",
                "type": "dining",
                "description": "é€™æ˜¯ä¸€å®¶ä»¥é«˜æ€§åƒ¹æ¯”è‘—ç¨±çš„ç¥æˆ¶ç‰›éµæ¿ç‡’é¤å»³ï¼Œéå¸¸å—è§€å…‰å®¢æ­¡è¿ã€‚åˆé¤æ™‚æ®µé€šå¸¸å¤§æ’é•·é¾ï¼Œæ™šé¤åƒ¹ä½ç¨é«˜ä½†ä¾ç„¶æ¯”é«˜ç´šæ–™äº­è¦ªæ°‘ï¼Œèƒ½çœ‹è‘—å¸«å‚…åœ¨éµæ¿å‰æ–™ç†ã€‚"
            },
            {
                "time": "18:30-19:05",
                "location": "æ–°ç¥æˆ¶ç«™-å²¡å±±ç«™",
                "note": "JRå±±é™½æ–°å¹¹ç·š ï¼Œç­æ¬¡:18:30ã€18:33ã€19:15ã€19:33 (è»Šç¨‹50åˆ†é˜)",
                "type": "transport"
            }
        ]
    },
    {
        "date": "12/6(å…­)",
        "theme": "å²¡å±±&å€‰æ•·",
        "city": "å²¡å±±ãƒ»å€‰æ•·",
        "events": [
            {
                "time": "08:36-08:54",
                "location": "å²¡å±± å‰å‚™æ´¥ç«™",
                "note": "JRå‰å‚™ç·š (18åˆ†é˜)ã€‚æ¯å°æ™‚1ç­",
                "type": "transport"
            },
            {
                "time": "09:10-10:30",
                "location": "å‰å‚™æ´¥ç¥ç¤¾",
                "note": "æ¡ƒå¤ªéƒå‚³èªªç›¸é—œ",
                "type": "sightseeing",
                "description": "é€™è£¡æ˜¯æ¡ƒå¤ªéƒå‚³èªªçš„åŸå‹ä¹‹åœ°ã€‚æœ€å£¯è§€çš„æ˜¯æ²¿è‘—å±±å¡åœ°å½¢å»ºé€ ã€å…¨é•·ç´„360å…¬å°ºçš„é•·è¿´å»Šï¼Œèµ°åœ¨å…¶ä¸­éå¸¸æœ‰ç¥ç¥•æ„Ÿã€‚æœ¬æ®¿ä¹Ÿæ˜¯æ—¥æœ¬å”¯ä¸€çš„ã€Œå‰å‚™æ´¥é€ ã€å»ºç¯‰é¢¨æ ¼ï¼Œè¢«åˆ—ç‚ºåœ‹å¯¶ã€‚"
            },
            {
                "time": "10:46-11:19",
                "location": "å‰å‚™æ´¥ç«™-å²¡å±±ç«™-å€‰æ•·ç«™",
                "note": "JRå‰å‚™ç·šè½‰JRå±±é™½æœ¬ç·š",
                "type": "transport"
            },
            {
                "time": "11:40-14:40",
                "location": "å€‰æ•·ç¾è§€ / åˆé¤",
                "note": "å¸¸å³è¡›é–€é£Ÿå ‚ (å®¶åº­é¢¨å®šé£Ÿç´„999å…ƒä»¥ä¸‹)",
                "type": "dining",
                "description": "ç™½å£å±‹æ•·èˆ‡å€‰æ•·å·æŸ³æ¨¹äº¤ç¹”çš„å¤è€è¡—é“ï¼Œéå¸¸é©åˆç©¿è‘—å’Œæœæ¼«æ­¥ã€‚å¯ä»¥æ­ä¹˜å°èˆ¹éŠæ²³ï¼Œæˆ–è€…å»é€›é€›ã€Œå¤§åŸç¾è¡“é¤¨ã€ã€‚é€™è£¡ä¹Ÿæœ‰è¨±å¤šè²©è³£ç‰›ä»”å¸ƒè£½å“ï¼ˆå€‰æ•·ç‰¹ç”¢ï¼‰å’Œç´™è† å¸¶ï¼ˆMTè† å¸¶ç™¼æºåœ°ï¼‰çš„åº—å®¶ã€‚"
            },
            {
                "time": "14:40-15:00",
                "location": "é˜¿æ™ºç¥ç¤¾",
                "note": "å€‰æ•·ç¾è§€åœ°å€æ­¥è¡Œ190å…¬å°º",
                "type": "sightseeing",
                "description": "ä½æ–¼é¶´å½¢å±±å±±é ‚çš„ç¥ç¤¾ï¼Œéœ€è¦çˆ¬ä¸€æ®µéšæ¢¯æ‰èƒ½åˆ°é”ã€‚å¾é€™è£¡å¯ä»¥ä¿¯ç°æ•´å€‹å€‰æ•·ç¾è§€åœ°å€çš„é»‘ç“¦ç™½ç‰†è¡—æ™¯ï¼Œè¦–é‡éå¸¸é¼é—Šã€‚"
            },
            {
                "time": "15:00-16:00",
                "location": "æ—æºåéƒå•†åº—",
                "note": "å¯è‡³ä¸‰æ¨“å±•æœ›å°",
                "type": "sightseeing",
                "description": "ç”±èˆŠè—¥å±€æ”¹å»ºçš„è¤‡åˆå¼è¨­è¨ˆå•†å ´ï¼Œé›†åˆäº†å¤šå®¶ç”Ÿæ´»é›œè²¨åº—èˆ‡å’–å•¡å»³ã€‚é ‚æ¨“çš„éœ²å°å…è²»é–‹æ”¾ï¼Œæ˜¯å¦ä¸€å€‹çœºæœ›å€‰æ•·ç¾è§€åœ°å€çš„å¥½åœ°æ–¹ã€‚"
            },
            {
                "time": "æ™šä¸Š",
                "location": "å€‰æ•·å¤œæ™¯",
                "note": "æ—æºåéƒå•†åº—ä¸‰æ¨“å±•æœ›å° / å€‰æ•·å·æ²¿å²¸å¤œé–“é»ç‡ˆ",
                "type": "sightseeing",
                "description": "å…¥å¤œå¾Œï¼Œå€‰æ•·å·æ²¿å²¸æœƒé»èµ·ç”±ä¸–ç•Œç´šç…§æ˜è¨­è¨ˆå¸«çŸ³äº•å¹¹å­è¨­è¨ˆçš„ç‡ˆå…‰ã€‚ä¸åŒæ–¼ç™½å¤©çš„ç†±é¬§ï¼Œå¤œæ™šçš„å€‰æ•·å‘ˆç¾å‡ºä¸€ç¨®éœè¬è€Œå¤¢å¹»çš„ç¾æ„Ÿï¼Œéå¸¸æµªæ¼«ã€‚"
            },
            {
                "time": "è³¼ç‰©",
                "location": "ä¸‰äº•OUTLET PARK å€‰æ•·",
                "type": "sightseeing",
                "description": "ä½æ–¼å€‰æ•·ç«™åŒ—å£ï¼Œèˆ‡Arioå•†å ´ç›¸é€£ã€‚é€™è£¡é›†åˆäº†è¨±å¤šæ—¥æœ¬èˆ‡åœ‹éš›å“ç‰Œï¼Œæ˜¯é›¢é–‹å²¡å±±å‰æœ€å¾Œè¡åˆºè³¼ç‰©çš„å¥½åœ°æ–¹ã€‚"
            },
            {
                "time": "æ™šé¤",
                "location": "å¸¸ç›¤é£Ÿå ‚ (~999 æ—¥åœ“å®¶å¸¸é¢¨ç…®é­š/ç‡’é­šå®šé£Ÿ)",
                "type": "dining",
                "description": "ï¼ˆå°šæœªæŒ‡å®šé¤å»³ï¼‰å¸¸ç›¤é£Ÿå ‚æ˜¯ç•¶åœ°å—æ­¡è¿çš„å¹³åƒ¹é£Ÿå ‚ï¼Œæä¾›ç‚¸ç‰©ã€ç‡’é­šç­‰å®¶å¸¸å®šé£Ÿã€‚å¦‚æœæƒ³æ›å£å‘³ï¼Œå€‰æ•·ç«™å‘¨é‚Šä¹Ÿæœ‰è¨±å¤šå±…é…’å±‹æˆ–æ‹‰éºµåº—ã€‚"
            },
            {
                "time": "æ™šä¸Š",
                "location": "å€‰æ•·ç«™-å²¡å±±ç«™",
                "note": "è»Šç¨‹16åˆ†é˜",
                "type": "transport"
            }
        ]
    },
    {
        "date": "12/7(æ—¥)",
        "theme": "å²¡å±±/è¿”åœ‹",
        "city": "å²¡å±±",
        "events": [
            {
                "time": "08:00-10:30",
                "location": "å²¡å±±å¾Œæ¨‚åœ’ + å²¡å±±åŸå¤–è§€",
                "note": "æ—¥æœ¬ä¸‰å¤§ååœ’ä¹‹ä¸€",
                "type": "sightseeing",
                "description": "ç²å¾—ç±³å…¶æ—ä¸‰æ˜Ÿè©•åƒ¹çš„åº­åœ’ï¼Œè¦–é‡éå¸¸é–‹é—Šï¼Œæ²’æœ‰ä»»ä½•é®è”½ç‰©ã€‚å¯ä»¥å¾åº­åœ’ä¸­çœ‹åˆ°é»é»‘çš„å²¡å±±åŸï¼ˆçƒåŸï¼‰ä½œç‚ºèƒŒæ™¯ï¼Œæ˜¯çµ•ä½³çš„æ‹ç…§é»ã€‚"
            },
            {
                "time": "10:45-11:05",
                "location": "å¾Œæ¨‚åœ’-é£¯åº—",
                "note": "æ­¥è¡Œ+å–è¡Œæ",
                "type": "transport"
            },
            {
                "time": "11:15-12:15",
                "location": "åˆé¤ (å²¡å±±è»Šç«™å…§æˆ–åœ°ä¸‹è¡—)",
                "note": "å²¡å±±ä¸€ç•ªè¡—æˆ–SANSUTE å²¡å±±",
                "type": "dining",
                "description": "ï¼ˆå°šæœªæŒ‡å®šé¤å»³ï¼‰å²¡å±±ç«™ç›´çµçš„è³¼ç‰©ä¸­å¿ƒæœ‰éå¸¸å¤šé¤å»³é¸æ“‡ï¼ŒåŒ…å«å£½å¸ã€è±¬æ’é£¯ã€ç¾©å¤§åˆ©éºµç­‰ã€‚é€™æ˜¯é›¢é–‹æ—¥æœ¬å‰çš„æœ€å¾Œä¸€é¤ï¼Œå»ºè­°æŒ‘é¸è‡ªå·±æƒ³åƒçš„æ–™ç†ã€‚"
            },
            {
                "time": "12:40-13:10",
                "location": "å²¡å±±è»Šç«™å·´å£«ç«™-å²¡å±±æ©Ÿå ´",
                "note": "2è™Ÿå·´å£«æœˆå°æ­ä¹˜12:40ç­æ¬¡",
                "type": "transport"
            },
            {
                "time": "15:25",
                "location": "æ­é£›æ©Ÿ",
                "note": "åœ‹éš›ç·šéœ€æå‰2.5å°æ™‚åˆ°å ´",
                "type": "transport"
            }
        ]
    }
];

        // ä½å®¿è³‡è¨Šæ•¸æ“š 
        const accommodationData = [
            { 
                checkIn: "2025/11/29", checkOut: "2025/11/30", 
                name: "é«˜æ¾ç«™å‰è¶…ç´šæ—…é¤¨ (Hyper-inn Takamatsu Ekimae)", 
                platform: "AOGDA", booker: "PEILING LIAO", 
                note: "ç„¡" 
            },
            { 
                checkIn: "2025/11/30", checkOut: "2025/12/01", 
                name: "é«˜æ¾fav é«˜æ¾é£¯åº— (fav TAKAMATSU)", 
                platform: "Agoda", booker: "SHU-YU HSIEH", 
                note: "ç„¡" 
            },
            { 
                checkIn: "2025/12/01", checkOut: "2025/12/04", 
                name: "ç¦å±±ç«™å‰å¤§å’ŒROYNETé…’åº— (Daiwa Roynet Hotel Fukuyama-Ekimae)", 
                platform: "Trip.com", booker: "LIAO PEILING", 
                note: "ç„¡" 
            },
            { 
                checkIn: "2025/12/04", checkOut: "2025/12/06", 
                name: "å²¡å±±ç«™å‰å¤§å’ŒROYNETé£¯åº— (Daiwa Roynet Hotel Okayama-Ekimae)", 
                platform: "AOGDA", booker: "PEILING LIAO", 
                note: "æˆ¿å‹ï¼šä¸‰äººæˆ¿ (Triple Room)" 
            },
            { 
                checkIn: "2025/12/06", checkOut: "2025/12/07", 
                name: "å²¡å±±ç«™å‰å¤§å’ŒROYNETé£¯åº— (Daiwa Roynet Hotel Okayama-Ekimae)", 
                platform: "KLOOK", booker: "PEILING LIAO", 
                note: "æˆ¿å‹ï¼šé›™åºŠ/é›™äººæˆ¿ (2é–“) (Twin/Double Room)" 
            }
        ];
        
        // ç­æ©Ÿè³‡è¨Šæ•¸æ“š
        const flightData = [
            {
                type: "å»ç¨‹",
                flightNo: "IT 214",
                airline: "tigersmart",
                duration: "2å°æ™‚ 25åˆ†",
                departureTime: "11:10",
                departureCity: "TPE (å°åŒ—(æ¡ƒåœ’))",
                arrivalTime: "14:35",
                arrivalCity: "OKJ (å²¡å±±)",
            },
            {
                type: "å›ç¨‹",
                flightNo: "IT 215",
                airline: "tigersmart",
                duration: "3å°æ™‚ 5åˆ†",
                departureTime: "15:25",
                departureCity: "OKJ (å²¡å±±)",
                arrivalTime: "17:30",
                arrivalCity: "TPE (å°åŒ—(æ¡ƒåœ’))",
            }
        ];

        let activeView = itineraryData[1].date; // é è¨­ç¬¬äºŒå¤©

        const typeStyles = {
            'sightseeing': { label: 'æ™¯é»', bg: 'bg-teal-50', border: 'border-teal-500', ring: 'bg-teal-500 ring-teal-100', badge: 'bg-teal-500' },
            'dining': { label: 'é¤å»³', bg: 'bg-red-50', border: 'border-red-500', ring: 'bg-red-500 ring-red-100', badge: 'bg-red-500' },
            'transport': { label: 'äº¤é€š', bg: 'bg-indigo-50', border: 'border-indigo-500', ring: 'bg-indigo-500 ring-indigo-100', badge: 'bg-indigo-500' },
            'stay': { label: 'ä½å®¿', bg: 'bg-orange-50', border: 'border-orange-500', ring: 'bg-orange-500 ring-orange-100', badge: 'bg-orange-500' },
            'activity': { label: 'æ´»å‹•/è³¼ç‰©', bg: 'bg-yellow-50', border: 'border-yellow-500', ring: 'bg-yellow-500 ring-yellow-100', badge: 'bg-yellow-500' }
        };
        
        // --- åŠŸèƒ½å‡½æ•¸ ---

        function toggleEditMode() {
            isEditMode = !isEditMode;
            const app = document.getElementById('app');
            const btn = document.getElementById('edit-btn');
            const footerMsg = document.getElementById('footer-message');
            
            if (isEditMode) {
                app.classList.add('editing');
                btn.classList.remove('bg-white', 'text-gray-700');
                btn.classList.add('bg-blue-600', 'text-white', 'ring-2', 'ring-blue-300');
                btn.innerHTML = 'âœ…'; // è®Šæˆå‹¾å‹¾åœ–ç¤º (ä»£è¡¨å®Œæˆç·¨è¼¯)
                footerMsg.innerHTML = 'âœï¸ ç·¨è¼¯æ¨¡å¼é–‹å•Ÿï¼šé»æ“Šä»»ä½•å¡ç‰‡å³å¯ä¿®æ”¹å…§å®¹';
                footerMsg.classList.add('text-blue-600', 'font-bold');
            } else {
                app.classList.remove('editing');
                btn.classList.add('bg-white', 'text-gray-700');
                btn.classList.remove('bg-blue-600', 'text-white', 'ring-2', 'ring-blue-300');
                btn.innerHTML = 'âœï¸';
                footerMsg.innerHTML = 'ğŸ’¡ é»æ“Šæœ‰ ğŸ“– åœ–ç¤ºçš„å¡ç‰‡å¯æŸ¥çœ‹ä»‹ç´¹';
                footerMsg.classList.remove('text-blue-600', 'font-bold');
            }
            // é‡æ–°æ¸²æŸ“ä»¥æ›´æ–°é»æ“Šäº‹ä»¶
            if (activeView !== 'ACCOMMODATION' && activeView !== 'FLIGHTS') {
                renderItineraryContent(activeView);
            }
        }

        function handleCardClick(eventIndex, eventType) {
            // ç·¨è¼¯æ¨¡å¼ï¼šå…¨éƒ¨å¯é»ï¼Œé–‹å•Ÿç·¨è¼¯è¦–çª—
            if (isEditMode) {
                openEditModal(eventIndex);
            } 
            // ç€è¦½æ¨¡å¼ï¼šåªæœ‰ç‰¹å®šé¡å‹ä¸”æœ‰è©³ç´°èªªæ˜çš„å¯é»ï¼Œé–‹å•Ÿè©³ç´°è¦–çª—
            else {
                const dayDataIndex = itineraryData.findIndex(d => d.date === activeView);
                if (dayDataIndex === -1) return;
                const eventData = itineraryData[dayDataIndex].events[eventIndex];
                
                // æª¢æŸ¥æ˜¯å¦æœ‰è©³ç´°èªªæ˜ (åªé‡å°æ™¯é»å’Œé¤å»³ï¼Œæˆ–è€…ä»»ä½•æœ‰å¡«å¯«descriptionçš„é …ç›®)
                if ((eventData.type === 'sightseeing' || eventData.type === 'dining') && 
                    eventData.description && eventData.description.trim() !== "") {
                    openDetailModal(eventIndex);
                }
            }
        }

        function openEditModal(eventIndex) {
            // æ‰¾å‡ºç•¶å¤©æ•¸æ“š
            const dayDataIndex = itineraryData.findIndex(d => d.date === activeView);
            if (dayDataIndex === -1) return;

            const eventData = itineraryData[dayDataIndex].events[eventIndex];

            // å¡«å…¥ Modal
            document.getElementById('edit-day-index').value = dayDataIndex;
            document.getElementById('edit-event-index').value = eventIndex;
            document.getElementById('edit-time').value = eventData.time;
            document.getElementById('edit-location').value = eventData.location;
            document.getElementById('edit-note').value = eventData.note;
            document.getElementById('edit-type').value = eventData.type || 'sightseeing';
            
            // å¡«å…¥æ–°çš„è©³ç´°ä»‹ç´¹æ¬„ä½ï¼Œå¦‚æœæ²’æœ‰å‰‡ç‚ºç©ºå­—ä¸²
            document.getElementById('edit-description').value = eventData.description || '';

            // é¡¯ç¤º Modal
            document.getElementById('edit-modal').classList.remove('hidden');
        }

        function openDetailModal(eventIndex) {
            const dayDataIndex = itineraryData.findIndex(d => d.date === activeView);
            if (dayDataIndex === -1) return;
            const eventData = itineraryData[dayDataIndex].events[eventIndex];
            const typeStyle = typeStyles[eventData.type] || typeStyles['sightseeing'];

            // è¨­ç½®å…§å®¹
            document.getElementById('detail-title').textContent = eventData.location;
            document.getElementById('detail-content').textContent = eventData.description;
            
            // è¨­ç½®æ¨™ç±¤æ¨£å¼
            const badge = document.getElementById('detail-type-badge');
            badge.textContent = typeStyle.label;
            badge.className = `text-xs font-bold px-2 py-0.5 rounded text-white mb-1 inline-block ${typeStyle.badge}`;

            // é¡¯ç¤º Modal
            document.getElementById('detail-modal').classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function saveEventChanges() {
            const dayIdx = parseInt(document.getElementById('edit-day-index').value);
            const eventIdx = parseInt(document.getElementById('edit-event-index').value);
            
            if (isNaN(dayIdx) || isNaN(eventIdx)) return;

            // æ›´æ–°æ•¸æ“š
            itineraryData[dayIdx].events[eventIdx] = {
                time: document.getElementById('edit-time').value,
                location: document.getElementById('edit-location').value,
                note: document.getElementById('edit-note').value,
                type: document.getElementById('edit-type').value,
                description: document.getElementById('edit-description').value // å„²å­˜è©³ç´°ä»‹ç´¹
            };

            // é—œé–‰ Modal ä¸¦é‡æ–°æ¸²æŸ“
            closeModal('edit-modal');
            renderItineraryContent(activeView);
        }

        // --- ä¸‹è¼‰åŠŸèƒ½ (æ ¸å¿ƒé‚è¼¯) ---
        function downloadHTML() {
            // 1. ç²å–ç•¶å‰é é¢çš„ HTML çµæ§‹
            let htmlContent = document.documentElement.outerHTML;

            // 2. æˆ‘å€‘éœ€è¦å°‡ç›®å‰çš„ itineraryData è®Šæ•¸ç‹€æ…‹ï¼Œå¯«å› HTML å­—ä¸²ä¸­
            // é€™æ¨£ä¸‹è¼‰å¾Œçš„æª”æ¡ˆæ‰æœƒåŒ…å«æœ€æ–°çš„ä¿®æ”¹
            const dataString = JSON.stringify(itineraryData, null, 4);
            
            // ä½¿ç”¨æ­£å‰‡è¡¨é”å¼æ›¿æ›æ‰åŸæœ¬ä»£ç¢¼ä¸­çš„ itineraryData å®šç¾©
            // å°‹æ‰¾ let itineraryData = [ ... ]; çš„å€å¡Š
            const regex = /let itineraryData = \[([\s\S]*?)\];/;
            
            if (regex.test(htmlContent)) {
                htmlContent = htmlContent.replace(regex, `let itineraryData = ${dataString};`);
                
                // 3. è§¸ç™¼ä¸‹è¼‰
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'æ—¥æœ¬è¡Œç¨‹_æœ€æ–°ç‰ˆ.html'; // è¨­å®šä¸‹è¼‰æª”å
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('æª”æ¡ˆå·²æº–å‚™ä¸‹è¼‰ï¼\nè«‹ä¿å­˜æ­¤æª”æ¡ˆï¼Œä¸‹æ¬¡é–‹å•Ÿå³ç‚ºä¿®æ”¹å¾Œçš„ç‰ˆæœ¬ã€‚');
            } else {
                alert('å„²å­˜å¤±æ•—ï¼šç„¡æ³•å®šä½æ•¸æ“šçµæ§‹ï¼Œè«‹è¯çµ¡é–‹ç™¼è€…ã€‚');
            }
        }


        // --- æ¸²æŸ“å°è¦½åˆ— ---

        function renderDateNav() {
            const navContainer = document.getElementById('date-nav');
            navContainer.innerHTML = '';
            
            // 1. ç­æ©Ÿè³‡è¨ŠæŒ‰éˆ•
            const isFlightActive = activeView === 'FLIGHTS';
            const flightButton = document.createElement('button');
            flightButton.setAttribute('data-view', 'FLIGHTS');
            flightButton.onclick = () => selectView('FLIGHTS');
            
            // å‹è‰²(Kachi-iro) æ·±è—
            flightButton.className = `
                flex-shrink-0 w-24 md:w-28 p-2 md:p-3 rounded transition-all duration-300
                ${isFlightActive
                    ? 'bg-[#2e4b71] text-white shadow-md' 
                    : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'
                }
            `;
            flightButton.innerHTML = `
                <div class="text-base md:text-lg font-serif-jp">âœˆï¸</div> 
                <div class="text-sm md:text-base font-medium mt-1 font-serif-jp">ç­æ©Ÿ</div> 
            `;
            navContainer.appendChild(flightButton);


            // 2. ä½å®¿è³‡è¨ŠæŒ‰éˆ•
            const isAccommodationActive = activeView === 'ACCOMMODATION';
            const accButton = document.createElement('button');
            accButton.setAttribute('data-view', 'ACCOMMODATION');
            accButton.onclick = () => selectView('ACCOMMODATION');
            
            // é‰›ä¸¹è‰² (Entan) ç´…æ©˜
            accButton.className = `
                flex-shrink-0 w-24 md:w-28 p-2 md:p-3 rounded transition-all duration-300
                ${isAccommodationActive
                    ? 'bg-[#d65a31] text-white shadow-md' 
                    : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'
                }
            `;
            accButton.innerHTML = `
                <div class="text-base md:text-lg font-serif-jp">ğŸ </div> 
                <div class="text-sm md:text-base font-medium mt-1 font-serif-jp">ä½å®¿</div> 
            `;
            navContainer.appendChild(accButton);


            // 3. æ—¥æœŸè¡Œç¨‹æŒ‰éˆ•
            itineraryData.forEach(day => {
                const isActive = day.date === activeView;
                
                const dateParts = day.date.split('(');
                const date = dateParts[0]; 
                const weekDay = dateParts[1].replace(')', ''); 

                const button = document.createElement('button');
                button.setAttribute('data-view', day.date);
                button.onclick = () => selectView(day.date);

                const cityLabel = day.city.split('ãƒ»')[0];

                button.className = `
                    flex-shrink-0 w-24 md:w-28 p-2 md:p-3 rounded transition-all duration-300
                    ${isActive 
                        ? 'bg-[#4b5563] text-white shadow-md' // ç‚­ç°è‰²
                        : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'
                    }
                `;

                button.innerHTML = `
                    <div class="text-xs md:text-sm font-medium ${isActive ? 'text-gray-300' : 'text-gray-400'} truncate font-serif-jp">${cityLabel}</div>
                    <div class="text-lg md:text-xl font-bold mt-1 font-serif-jp">${date}</div> 
                    <div class="text-sm md:text-base ${isActive ? 'font-light' : 'font-medium'}">é€±${weekDay}</div> 
                `;

                navContainer.appendChild(button);
            });

            const activeElement = navContainer.querySelector(`[data-view="${activeView}"]`);
            if (activeElement) {
                setTimeout(() => {
                    activeElement.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }, 100);
            }
        }

        function renderFlightContent() {
            const contentContainer = document.getElementById('itinerary-content');
            let html = `
                <div class="p-2 mb-4 mt-2 text-center">
                    <h2 class="text-2xl md:text-3xl font-serif-jp font-bold text-[#2e4b71] tracking-widest border-b-2 border-[#2e4b71] inline-block pb-2">ç­æ©Ÿè³‡è¨Š</h2>
                    <p class="text-sm md:text-base text-gray-500 mt-3 font-serif-jp">è«‹æ³¨æ„ï¼šåœ‹éš›ç·šéœ€æå‰2.5å°æ™‚åˆ°å ´ã€‚</p>
                </div>
                <div class="space-y-6">
            `;

            flightData.forEach((flight, index) => {
                const themeColor = flight.type === 'å»ç¨‹' ? 'border-[#2e4b71]' : 'border-[#9e3a3a]';
                const textColor = flight.type === 'å»ç¨‹' ? 'text-[#2e4b71]' : 'text-[#9e3a3a]';
                const iconBg = flight.type === 'å»ç¨‹' ? 'bg-[#2e4b71]' : 'bg-[#9e3a3a]';

                html += `
                    <div class="bg-washi p-0 rounded-sm shadow-sm relative overflow-hidden group">
                        <div class="absolute left-0 top-0 bottom-0 w-1.5 ${iconBg}"></div>

                        <div class="p-5 md:p-6 pl-7">
                            <div class="flex justify-between items-baseline border-b border-dashed border-gray-300 pb-3 mb-4">
                                <h3 class="text-xl md:text-2xl font-serif-jp font-bold ${textColor} tracking-wider">
                                    <span class="inline-block px-2 py-0.5 text-sm text-white ${iconBg} align-middle mr-2 rounded-sm" style="font-family: 'Noto Serif TC';">${flight.type}</span>
                                    ${flight.flightNo}
                                </h3>
                                <span class="text-sm md:text-base text-gray-500 font-serif-jp tracking-wide">${flight.airline}</span>
                            </div>
                            
                            <div class="space-y-6">
                                <div class="relative flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                                    <div class="flex-1">
                                        <div class="text-xs text-gray-400 font-serif-jp mb-1 tracking-widest">DEPARTURE</div>
                                        <div class="font-mono text-3xl md:text-4xl font-bold text-gray-800">${flight.departureTime}</div>
                                        <div class="text-base text-gray-600 mt-1 font-serif-jp">${flight.departureCity}</div>
                                    </div>

                                    <div class="hidden md:flex flex-col items-center justify-center w-32">
                                        <div class="text-xs text-gray-400 mb-1">${flight.duration}</div>
                                        <div class="w-full h-px bg-gray-300 relative">
                                            <div class="absolute right-0 -top-1 w-2 h-2 bg-gray-300 rounded-full"></div>
                                        </div>
                                        <div class="text-xl mt-1 text-gray-300">âœˆ</div>
                                    </div>

                                    <div class="flex-1 md:text-right">
                                        <div class="text-xs text-gray-400 font-serif-jp mb-1 tracking-widest">ARRIVAL</div>
                                        <div class="font-mono text-3xl md:text-4xl font-bold text-gray-800">${flight.arrivalTime}</div>
                                        <div class="text-base text-gray-600 mt-1 font-serif-jp">${flight.arrivalCity}</div>
                                    </div>
                                    
                                    <div class="md:hidden w-full border-t border-dashed border-gray-200 pt-3 text-sm text-gray-500">
                                        â±ï¸ é£›è¡Œæ™‚é–“: <span class="font-mono">${flight.duration}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            contentContainer.innerHTML = html;
        }


        function renderAccommodationContent() {
            const contentContainer = document.getElementById('itinerary-content');
            let html = `
                <div class="p-2 mb-4 mt-2 text-center">
                    <h2 class="text-2xl md:text-3xl font-serif-jp font-bold text-[#d65a31] tracking-widest border-b-2 border-[#d65a31] inline-block pb-2">ä½å®¿è³‡è¨Š</h2>
                </div>
                <div class="space-y-6">
            `;

            accommodationData.forEach((hotel, index) => {
                const noteContent = hotel.note && hotel.note !== 'ç„¡' ? hotel.note : 'ç„¡ç‰¹åˆ¥å‚™è¨»';

                html += `
                    <div class="bg-washi rounded-sm shadow-sm border border-gray-100 relative overflow-hidden">
                        <div class="h-1 w-full bg-[#d65a31] opacity-80"></div>
                        
                        <div class="p-5 md:p-6">
                            <h3 class="text-xl md:text-2xl font-serif-jp font-bold text-gray-800 leading-snug mb-4">
                                ${hotel.name}
                            </h3>
                            
                            <div class="grid grid-cols-1 gap-4 text-gray-700">
                                <div class="flex flex-col bg-white p-3 border border-gray-100 rounded-sm">
                                    <span class="text-xs text-[#d65a31] font-serif-jp mb-1 tracking-wider">å…¥ä½æœŸé–“</span>
                                    <div class="font-mono text-lg md:text-xl font-medium">
                                        ${hotel.checkIn} <span class="text-gray-300 mx-2">/</span> ${hotel.checkOut}
                                    </div>
                                </div>

                                <div class="flex items-center justify-between text-sm md:text-base px-1">
                                    <div>
                                        <span class="text-gray-400 mr-2 font-serif-jp">é è¨‚å¹³å°</span>
                                        <span class="font-medium">${hotel.platform}</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-400 mr-2 font-serif-jp">é è¨‚è€…</span>
                                        <span class="font-medium">${hotel.booker}</span>
                                    </div>
                                </div>

                                <div class="mt-2 pt-3 border-t border-dashed border-gray-300">
                                    <span class="text-xs text-gray-400 block mb-2 font-serif-jp">å‚™è¨»äº‹é …</span>
                                    <p class="text-sm md:text-base text-gray-600 leading-relaxed bg-[#f2f4f6] p-3 rounded-sm font-light">
                                        ${noteContent}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            contentContainer.innerHTML = html;
        }

        function renderItineraryContent(date) {
            const contentContainer = document.getElementById('itinerary-content');
            const dayData = itineraryData.find(d => d.date === date);

            if (!dayData) {
                contentContainer.innerHTML = `<div class="text-center p-8 text-lg text-gray-500 font-serif-jp">æ‰¾ä¸åˆ° ${date} çš„è¡Œç¨‹è³‡è¨Šã€‚</div>`;
                return;
            }

            const fullDate = dayData.date; 
            const dateParts = fullDate.split('(');
            const dateOnly = dateParts[0]; 
            const weekDayOnly = dateParts[1].replace(')', ''); 

            let html = `
                <div class="p-2 mb-4 mt-2">
                    <h2 class="text-xl md:text-2xl font-serif-jp font-bold text-gray-800 border-l-4 border-indigo-700 pl-3">${dateOnly} <span class="text-base font-normal text-gray-500 ml-1">(é€±${weekDayOnly})</span></h2> 
                    <p class="text-base md:text-lg text-indigo-700 font-medium pl-4 mt-1 font-serif-jp">${dayData.theme} &middot; ${dayData.city}</p> 
                </div>
                <div class="space-y-0">
            `;


            // è¡Œç¨‹æ™‚é–“è»¸
            dayData.events.forEach((event, index) => {
                const type = event.type || 'transport';
                const styles = typeStyles[type] || typeStyles['transport']; 
                
                // æª¢æŸ¥æ˜¯å¦æœ‰è©³ç´°èªªæ˜
                const hasDescription = (event.description && event.description.trim() !== "");
                // åˆ¤æ–·æ˜¯å¦é¡¯ç¤ºæ¸¸æ¨™æ‰‹å‹¢ (ç·¨è¼¯æ¨¡å¼æ†ç‚ºçœŸï¼Œç€è¦½æ¨¡å¼åªæœ‰è©³ç´°å…§å®¹æ™‚ç‚ºçœŸ)
                const cursorClass = isEditMode ? 'cursor-pointer' : (hasDescription ? 'has-detail-cursor' : '');
                // æ›¸æœ¬åœ–ç¤º (åªåœ¨ç€è¦½æ¨¡å¼ä¸”æœ‰èªªæ˜æ™‚é¡¯ç¤ºï¼Œæˆ–ç·¨è¼¯æ¨¡å¼é¡¯ç¤ºæç¤º)
                const bookIcon = hasDescription ? '<span class="absolute top-3 right-3 text-lg" title="é»æ“ŠæŸ¥çœ‹ä»‹ç´¹">ğŸ“–</span>' : '';

                // onclick é‚è¼¯çµ±ä¸€ç”± handleCardClick è™•ç†
                // ä¿®æ”¹èªªæ˜ï¼šç§»é™¤äº† ${event.note} å‰é¢çš„æ‰€æœ‰ç©ºç™½ç¸®æ’ï¼Œç¢ºä¿ whitespace-pre-wrap ä¸æœƒé¡¯ç¤ºå¤šé¤˜ç©ºç™½
                html += `
                    <div class="flex relative itinerary-item" data-index="${index}">
                        
                        <div class="flex-shrink-0 time-column pt-3"> 
                            <div class="text-sm md:text-xl font-mono font-bold text-gray-600 inline-block px-1 py-0.5 rounded">
                                ${event.time}
                            </div>
                            
                            <div class="timeline-dot ${styles.ring} rounded-full ring-2 md:ring-4 z-10 shadow-sm bg-white"></div>
                        </div>

                        <div class="timeline-line"></div>
                        
                        <div class="flex-grow pb-6 pl-4 md:pb-8 md:pl-8"> 
                            <div onclick="handleCardClick(${index}, '${type}')" class="${styles.bg} p-3 md:p-5 rounded-sm shadow-sm border-l-2 ${styles.border} timeline-card bg-opacity-60 relative ${cursorClass}"> 
                                ${!isEditMode ? bookIcon : ''}
                                <div class="flex flex-col">
                                    <div class="flex items-start justify-between relative">
                                        <p class="text-lg md:text-xl font-bold text-gray-800 mr-2 leading-snug tracking-wide pr-6">
                                            ${event.location}
                                        </p>
                                    </div>
                                    
                                    <div class="mt-2 pt-2 md:mt-3 md:pt-3 border-t border-dashed border-gray-200 w-full flex flex-col md:flex-row md:justify-between md:items-end gap-2">
                                        ${event.note && event.note !== 'é»æ“Šæ–°å¢å‚™è¨»' ? `
                                            <p class="text-sm md:text-base text-gray-600 leading-relaxed w-full whitespace-pre-wrap">${event.note}</p>
                                        ` : `
                                            <p class="text-sm md:text-base text-gray-400 leading-relaxed w-full italic">
                                                ç„¡å‚™è¨»
                                            </p>
                                        `}

                                        <span class="self-start md:self-auto flex-shrink-0 text-xs md:text-sm font-medium px-2 py-0.5 rounded-sm border ${styles.border.replace('border-', 'text-')} bg-white/80">
                                            ${styles.label}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            contentContainer.innerHTML = html;
        }

        function selectView(view) {
            if (activeView !== view) {
                activeView = view;
                renderDateNav();
                
                if (view === 'ACCOMMODATION') {
                    renderAccommodationContent();
                    // éš±è—ç·¨è¼¯æŒ‰éˆ• (ç›®å‰åªæ”¯æ´ç·¨è¼¯è¡Œç¨‹)
                    document.getElementById('edit-btn').classList.add('hidden');
                } else if (view === 'FLIGHTS') {
                    renderFlightContent();
                    document.getElementById('edit-btn').classList.add('hidden');
                } 
                else {
                    renderItineraryContent(activeView);
                    document.getElementById('edit-btn').classList.remove('hidden');
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (itineraryData.length > 0) {
                activeView = itineraryData[1].date; 
                renderDateNav();
                renderItineraryContent(activeView);
            }
        });
    </script>

</body></html>